<link rel="stylesheet" type="text/css" href="javascript/assets/plugins/jquery-ui-multiselect/jquery.multiselect.css" />
<link rel="stylesheet" type="text/css" href="javascript/assets/plugins/select2/select2.css" />
<!-- BEGIN GLOBAL MANDATORY STYLES -->
<link rel="stylesheet" type="text/css" href="javascript/assets/fonts/font-awesome/css/font-awesome.min.css"/>
<link rel="stylesheet" type="text/css" href="javascript/assets/plugins/bootstrap/css/bootstrap.min.css"/>
<!-- END GLOBAL MANDATORY STYLES -->
<!-- BEGIN PAGE LEVEL STYLES -->
<link rel="stylesheet" type="text/css" href="javascript/assets/plugins/jquery-ui/jquery-ui-custom.min.css" />
<link rel="stylesheet" type="text/css" href="javascript/assets/plugins/jquery-ui-multiselect/jquery.multiselect.css" />
<link rel="stylesheet" type="text/css" href="javascript/assets/plugins/select2/select2.css" />
<link rel="stylesheet" type="text/css" href="javascript/assets/plugins/bootstrap-datepicker/css/datepicker.css"/>
<link rel="stylesheet" type="text/css" href="javascript/assets/plugins/bootstrap-daterangepicker/daterangepicker-bs3.css"/>
<!-- END PAGE LEVEL STYLES -->
<!-- BEGIN THEME STYLES -->
<link rel="stylesheet" type="text/css" href="javascript/assets/css/style-bootstrap-custom.css"/>
<link rel="stylesheet" type="text/css" href="javascript/assets/css/style.css"/>
<link rel="stylesheet" type="text/css" href="javascript/assets/css/style-responsive.css"/>
<link rel="stylesheet" type="text/css" href="javascript/assets/css/style-upgrade.css"/>
<link rel="stylesheet" type="text/css" href="javascript/assets/css/theme-default.css"/>
<link rel="stylesheet" type="text/css" href="javascript/assets/css/plugins.css"/>

<!--[if lt IE 9]>
<link rel="stylesheet" type="text/css" href="javascript/assets//css/ie8.css"/>
<![endif]-->
<!-- END THEME STYLES -->
<!-- BEGIN PAGE CONTAINER --> 
<div id="content" class="page-container"  style="height: 100%">  
<!-- BEGIN PAGE CONTENT -->  
<div class="page-content-wrapper">   
<!-- END TICKER-->  
<div class="page-content fullwidth">   
  <!-- BEGIN PAGE HEADER-->  
 <div class="row">   
   <!-- BEGIN PAGE TITLE-->  
   <h3 class="page-title">加班申請單<small>填寫</small> </h3>
   <!-- END PAGE TITLE-->   
 </div>  
<div class="clearfix"> </div>
<!-- END PAGE ROW--> 
<!-- BEGIN PAGE ROW--> 
<div class="row "> 
<div class="col-md-12 col-sm-12"> 
<div class="portlet no-border"> 
<div class="tab-pane" id="tab_form_1"> 
<div class="portlet"> 
 <div class="portlet-title"> 
  <div class="caption"> <i class="fa fa-search"></i>選擇</div> 
  <div class="tools"> <a href="javascript:;" class="collapse"></a>  </div> 
</div> 
<div class="portlet-body form">  
   <!-- BEGIN FORM--> 
<form class="form-horizontal" name="ActionForm"  method="post"  action="<ActionURI/>"> 
 <input type='hidden' name='act'>
<input type='hidden' name='rowID'   value='<rowID/>'   id='rowID' >
<input type='hidden' name='mID'   value='<mID/>'    id='mID' >
<div class="form-body">
<div class="row">
<div class="col-md-6">
<div class="form-group">
<SPAN class="control-label col-md-3">部门:</SPAN>

<div class="col-md-9">
<SPAN class="control-label col-md-3"><UserEmployeeNo/></SPAN>
<hiddenEmployeeNo/>
</div>
 </div>
</div>
<div class="col-md-6">
<div class="form-group">
<SPAN class="control-label col-md-3">单位:</SPAN>
<div  id='UnitDiv'     class="col-md-9">
<SearchUnit/><hiddenUnit/>
 </div>
</div>
</div>
</div>


<div class="row">
<div class="col-md-6">
<div class="form-group">
<SPAN class="control-label col-md-3">工号:</SPAN>
<div  id='EmployeeNoDiv'  class="col-md-9">
<SearchEmployeeNo/><hiddenUserNo/></div> 
 </div>
</div>
<div class="col-md-6">
<div class="form-group">
<SPAN class="control-label col-md-3">姓名:</SPAN>
<div  id='EmployeeDiv'  class="col-md-9">
<SearchEmployee/><hiddenUser/>
 </div>
 </div>
</div>
</div>

<div class="row">
<div class="col-md-6">
<div class="form-group">
<SPAN class="control-label col-md-3">職務:</SPAN>
<div  id='EmployeeNoDiv'  class="col-md-9">
<SPAN class="control-label col-md-3">
<SPAN  id='dutiesDiv' ></SPAN>
</SPAN>
</div> 
 </div>
</div>
<div class="col-md-6">
<div class="form-group">
<SPAN class="control-label col-md-3">到職日:</SPAN>
<div  id='EmployeeDiv'   class="col-md-9">
<SPAN class="control-label col-md-3">
<SPAN  id='entrydateDiv' ></SPAN>
</SPAN>
 </div>
 </div>
</div>
</div>

<div class="row">
<div class="col-md-6">
<div class="form-group">
<SPAN class="control-label col-md-3">加班事由:</SPAN>
<div class="col-md-9">
<div class="row">
<div class="col-md-6"> 
 &userReason
</div>  
 <div class="col-md-6"> 
&SearchReasons
 </div> 
</div>  
</div>
 </div>
</div>
<div class="col-md-6">
<div class="form-group">
<SPAN class="control-label col-md-3">提交日期:</SPAN>
<div class="col-md-9">
&submitDate
</div> 
 </div>
</div>
</div>



<div class="row">
<div class="col-md-6">
<div class="form-group">
<SPAN class="control-label col-md-3">加班时间:</SPAN>
<div class="col-md-9">

<div class="row">
<div class="col-md-6"> 
<queryDateTwo/>
  </div> 
  <!--  ROW-->
<div class="col-md-2"> 
班別:
</div> 
<div class="col-md-4"> 
&OverTimeClass
</div> 
</div>  

 
</div>
 </div>
</div>
<div class="col-md-6">
<div class="form-group">
<SPAN class="control-label col-md-3">总共小时:</SPAN>
<div class="col-md-9">
&addTime
</div> 
 </div>
</div>
</div>


<div class="row">
<div class="col-md-6">
<div class="form-group">
<div id='TimeDiv'  class="col-md-12">

<!--  多選时间區塊開始-->
<TimeDiv/>
<!--  多選时间區塊結束-->


</div> 
 </div>
</div>
<div class="col-md-6">
<div class="form-group">
<SPAN class="control-label col-md-3">
備註:
</SPAN>
<div class="col-md-9">
&Note
</div>
 </div>
</div>
</div>
</div>
</div>
<div class="form-actions right">  
<button class="btn btn-success " onclick="ActionForm.act.value='QUE';ActionForm.submit();" type="button">查询</button> 
<button id='saveBut' class="btn btn-primary " onclick="saveData()" type="button"><saveButText/></button> 
</div></FORM> 
<msg/>
</div> 
<drawTableM/>
</div> 
</div>
  <!-- END PAGE CONTENT --> 
</div>
<!-- END PAGE CONTAINER -->  <!-- BEGIN FOOTER --> 
<div id="footer" class="footer"> 
<div class="footer-inner"> </div> 
<div class="footer-tools"></div> 
<!-- END FOOTER -->  
</div> 
<!-- END WRAPPER -->  

<!--[if lt IE 9]>
<link rel="stylesheet" type="text/css" href="javascript/assets/css/ie8.css"/>
<![endif]-->
<!-- END THEME STYLES -->
<!--[if lt IE 9]>
<script type="text/javascript" src="javascript/assets//plugins/respond.min.js"></script>
<script type="text/javascript" src="javascript/assets//plugins/excanvas.min.js"></script> 

<script type="text/javascript" src="javascript/assets//plugins/jquery-1.11.1.min.js"></script> 
<![endif]--> 
<script type="text/javascript" src="javascript/assets//plugins/jquery-migrate-1.1.0.js"></script> 
<script type="text/javascript" src="javascript/assets//plugins/bootstrap/js/bootstrap.min.js"></script> 
<script type="text/javascript" src="javascript/assets//plugins/jquery-slimscroll/jquery.slimscroll.min.js"></script> 
<script type="text/javascript" src="javascript/assets//plugins/jquery-cookie-master/src/jquery.cookie.js"></script> 
<!-- END CORE PLUGINS --> 
<!-- BEGIN PAGE LEVEL PLUGINS --> 
<script type="text/javascript" src="javascript/assets/plugins/jquery-ui/jquery-ui-custom.min.js"></script> 
<script type="text/javascript" src="javascript/assets/plugins/jquery-ui-touch-punch/jquery.ui.touch-punch.min.js"></script> 
<script type="text/javascript" src="javascript/assets/plugins/jquery-ui-multiselect/jquery.multiselect.js"></script> 
<script type="text/javascript" src="javascript/assets/plugins/bootstrap-datepicker/js/bootstrap-datepicker.js"></script> 
<script type="text/javascript" src="javascript/assets/plugins/bootstrap-daterangepicker/moment.min.js"></script>
<script type="text/javascript" src="javascript/assets/plugins/select2/select2.js"></script> 
<script type="text/javascript" src="javascript/assets/plugins/bootstrap-daterangepicker/daterangepicker.js"></script> 
<script type="text/javascript" src="javascript/assets/plugins/jquery-inputmask/jquery.inputmask.bundle.min.js"></script> 
<script type="text/javascript" src="javascript/assets/plugins/bootstrap-switch/static/js/bootstrap-switch.min.js"></script> 
<script type="text/javascript" src="javascript/assets/plugins/spinner/jquery.mousewheel.js"></script> 
<script type="text/javascript" src="javascript/assets//plugins/data-tables-bs3/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="javascript/assets//plugins/data-tables-bs3/DT_bootstrap.js"></script> 
<!-- END PAGE LEVEL PLUGINS --> 
<!-- BEGIN PAGE LEVEL SCRIPTS --> 
<script type="text/javascript" src="javascript/assets//scripts/app.js"></script> 
<script type="text/javascript" src="javascript/assets/scripts/form-components.js"></script> 
<script type="text/javascript" src="javascript/assets/scripts/ui-jqueryui-sliders.js"></script> 
<script type="text/javascript" src="javascript/assets/scripts/ui-jqueryui-select.js"></script> 
<script type="text/javascript" src="javascript/assets//scripts/table-advanced.js"></script> 
<script type="text/javascript" src="javascript/assets/layer/layer.js"></script> 
<!-- END PAGE LEVEL SCRIPTS --> 
<script>
jQuery(document).ready(function() {    
  //var fnSetData=null;
   App.init(); // init layout and core plugins
   TableAdvanced.init();
   FormComponents.init();
   updateUnit();
   
   
	var Status=$('#Status').val();  
	if( Status=='I'){ 
		$('#butI').attr('disabled','disabled')  
		$('#butR').attr('disabled','disabled')  
		} 
	if( Status=='R'){ 
		$('#butR').attr('disabled','disabled')  
		} 
	
	
	  $('#searchDepartmen').change(function(){  
			//	layer.msg('玩命提示中');
			   var p1= $('#searchDepartmen').val();  //这就是selected的值  
			   jQuery.ajax({
					url:'<ActionURI/>&doajax=SwEmpNo',
					type:'POST',
					data:{searchDepartmen:p1},
					success:function(data){
						 $('#EmployeeNoDiv').html(data);    
						 $('#searchEmployeeNo').change(function(){  
						     var p1=$(this).children('option:selected').val();  //这就是selected的值  
							 $('#searchEmployee').select2('val',p1);          
						   }) 
					}
				});
	  })  
	  
	$('#searchEmployee').change(function(){  
	     var p1=$(this).children('option:selected').val();  //这就是selected的值  

	     jQuery.ajax({
				url:'<ActionURI/>&doajax=unit',
				type:'POST',
				data:{employeeID:p1},
				success:function(data){
					 $('#UnitDiv').html(data);    
					   updateUnit();
				}
			});

   			$('#searchEmployeeNo').select2('val',p1);    
	   })  
  $('#searchEmployeeNo').change(function(){  
	     var p1=$(this).children('option:selected').val();  //这就是selected的值  
	     var Unit='';
	     jQuery.ajax({
				url:'<ActionURI/>&doajax=unit',
				type:'POST',
				data:{employeeID:p1},
				success:function(data){
					//layer.msg('data  '+data); 
					 $('#UnitDiv').html(data);    
					   updateUnit();
				}
			});
	     
  			 $('#searchEmployee').select2('val',p1);       
	   }) 
	
	   $('#overTimeClass').change(function(){  
		  	 //ActionForm.act.value='SwTime';
		  	 //	ActionForm.submit();   
		 var p1= $('#overTimeClass').val();  //这就是selected的值  
		   jQuery.ajax({
				url:'<ActionURI/>&doajax=SwTime',
				type:'POST',
				data:{overTimeClass:p1},
				success:function(data){
					 $('#TimeDiv').html(data);    
					 $('#addTime').val('5');
				}
			});
		  	 
		   })  
		   
		  
});

function    checkOK(){  
	
	ActionForm.act.value='I';  
	ActionForm.submit();   
}  
function    checkNO(){  

	ActionForm.act.value='R';  
	ActionForm.submit();   
}  

 function    saveData(){  
	 
	if($('#searchEmployeeNo').val()=='0'){   
			 layer.msg('請選擇姓名工號');  
				return;  
		}  
	if($('#searchReasons').val()=='0'){ 
		if($('#userReason').val()==''){ 
		
			layer.msg('請選擇加班事由'); 
				return; 
		}
		} 

	if($('#searchUnit').val()=='0'){ 
		layer.msg('請選擇单位');  
			return;  
	}  

		if($('#startTimeHh').val()=='00'){ 
			layer.msg('請選擇開始时间');  
			return; 
	}

	if($('#endTimeHh').val()=='00'){  
		layer.msg('請選擇結束时间');
				return;  
		}  


 
		   
		ActionForm.act.value='Save'; 
		ActionForm.submit();   

	}  
  

 function    updateUnit(){  
	 // layer.msg(' 0 ');  
	 $('#searchUnit').change(function(){  
	//	   layer.msg(' 1 ');  
		var p1=$(this).children('option:selected').val();  //这就是selected的值  
	//   layer.msg(' searchUnit :'+ p1);  

	   jQuery.ajax({
			url:'<ActionURI/>&doajax=SwDUnit',
			type:'POST',
			data:{searchUnit:p1,searchDepartmen:$('#searchDepartmen').val()},
			success:function(data){
				var datas=data.split("#");
		 		  $('#EmployeeNoDiv').html(datas[0]);  
				  $('#EmployeeDiv').html(datas[1]);  
			//      layer.msg(' data :'+ data);  
				  $('#searchEmployee').change(function(){  
					     var p1=$(this).children('option:selected').val();  //这就是selected的值  
					 	$('#searchEmployeeNo').select2('val',p1);         
					   })  
				   $('#searchEmployeeNo').change(function(){  
						  var p1=$(this).children('option:selected').val();  //这就是selected的值  
					      $('#searchEmployee').select2('val',p1);    
				   }) 
				}
			});
	 });
	 
} 
</script> 
<!-- END JAVASCRIPTS -->
</div>
